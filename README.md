# amafatt
Una applicazione prototipo per inserire dati ricevuti da Amazon in formato txt nella API di FattureinCloud.it.  
Max sa cosa vuole dalla applicazione ed io (Luciano) costruiro la app come prototipo.  
Dopo si vedra se saremmo contenti con il risultato e si andra avanti.  
## FattureinCloud.it
Ho creato un nuovo account per luciano.bestia@gmail.com dove si puo sperimentare.  
Io e Max abbiamo accesso a questo account e possiamo collaborare.  
La documentazione della API e qui:  
https://api.fattureincloud.it/v1/documentation/dist/#!/Richiesta_generica/JSONRequest  
La prima cosa da chiarire sono le liste di prodotti e clienti.  

## Rust, Wasm, Dodrio
La lingua nella qualle e scritta la applicazione non e molto importante.  
Questa si puo cambiare anche dopo. La logica della applicazione ed il mapping di dati e importante.  
Io costruiro il prototipo nella lingua Rust. La applicazione sara compilata in Wasm/Webassembly e funzionera dentro il browser (Chrome). Per la interfaccia utente GUI usero la library 
Dodrio Virtual Dom. Per addesso ci sara molto HTML e niente o pochissimo css e javascript.  
## Development environment
Install the rust toolchain from  
https://www.rust-lang.org/tools/install.  
For wasm workflow tool installation on Windows:  
https://rustwasm.github.io/wasm-pack/installer/  
You will need also a simple static file server:  
`cargo install basic-http-server`  
## Source
Absolutely everything manually coded is in Rust language in the file `/src/lib.rs`.  
No manual JavaScript or HTML needed.  
The index.html file is a standard scaffold.  
The pkg/mem.js file is generated by wasm-bindgen.  
I prepared a small simple css with css grid for styling.   
No need for npm or web-pack.  
## Make
I will prepare different tasks/flow in cargo make.  
https://github.com/sagiegurari/cargo-make  
Install it wit `cargo install --force cargo-make`  
`cargo make` - lists the possible available/public flows/tasks  
`cargo make dev` - builds the development version and runs the server and the browser  
`cargo make release` - builds the release version and runs the server and the browser  
The make script will also lunches the `basic-http-server`and open the browser.  
## Workflow
The first screen has a big text field where to copy/paste the txt file from Amazon.  
No file uploads here because we don't really need/have a server.  
The button Next process the txt and creates a struct with data as close as possible what the API needs.  
Next screen shows that data and it is possible to manually change them.  
The button `Send to API` makes a json request to the API.  
The next screen shows the response of the server.  
After that all needed editing, deleting, chaning is made through the FattureInCloud.it user interface.  
## Reference
https://github.com/rustwasm/wasm-bindgen/tree/master/examples/fetch  


